<html>
<head>
	<title>UARK Rocket Telemetry</title>
	<meta charset = "UTF-8">
	<script src="RocketTele.js"></script>
	<script src="Chart.js"></script>
	<style>
		* {
		  box-sizing: border-box;
		}
		
		.form-field {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 10px;
		  }
		  .form-field label {
			margin-right: 10px;
			flex-basis: 30%;
		  }
		  .form-field input[type="text"] {
			flex-basis: 70%;
		  }

		  .ejection-button {
			background-color: #FF0000;
			color: #FFFFFF;
			border-radius: 50%;
			width: 150px;
			height: 150px;
			font-size: 18px;
			line-height: 150px;
			text-align: center;
			text-transform: uppercase;
			box-shadow: 0px 3px 3px #888888, inset 0px 2px 2px rgba(255,255,255,0.5);
			background: linear-gradient(to bottom, #FF0000, #8B0000);
			position: relative;
		  }
		  
		  .ejection-button:before {
			content: "";
			width: 100%;
			height: 50%;
			position: absolute;
			top: 0px;
			left: 0px;
			border-radius: 50%;
			background: rgba(255,255,255,0.3);
			
		  }
		  
		  .ejection-button:after {
			content: "";
			width: 60%;
			height: 60%;
			position: absolute;
			top: 20%;
			left: 20%;
			border-radius: 50%;
			background: rgba(255,255,255,0.3);
			box-shadow: 0px 1px 1px rgba(0,0,0,0.5), inset 0px 1px 1px rgba(255,255,255,0.5);
		  }
		  
		  .ejection-button:hover {
			background: linear-gradient(to bottom, #CC0000, #8B0000);
			cursor: pointer;
		  }
		  
		  

		 /************************/
		.columnData {
		  float: left;
		  background-color: black;
		  width: 50%;
		  height: 45%;
		  padding-left: 2%;
		  padding-right: 2%;
		}
		.columnGraph {
		  float: left;
		  background-color: black;
		  width: 33.33%;
		  height: 55%;
		  padding-left: 2%;
		  padding-right: 2%;
		  
		}
		/* Clear floats after the columns */
		.row:after {
		  content: "";
		  display: table;
		  clear: both;
		}
		.button {
			background-color: red; /* Green */
			border: none;
			color: white;
			padding: 20px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			margin: 4px 2px;

		  }
		.button{border-radius: 50%;}
	</style>
</head>


<body onload = "display()">
	<div class="row">		  
		<div  style="border:3px double green;" class="columnData"><h2 style="color:#008000">Live data - </h2>
			<p class="form-field" style="color:#008000">  <label for="Accel">Acceleration:</label> <input type="text" id="Accel" name="Accel" readonly="true" /></p>
			<p class="form-field" style="color:#008000">  <label for="Vel">Velocity:</label> <input type="text" id="Vel" name="Vel"> </p>
			<p class="form-field" style="color:#008000">  <label for="Boost1">Booster 1 time:</label> <input type="text" id="Boost1" name="Boost1" readonly="true" /></p>
			<p class="form-field" style="color:#008000">  <label for="Boost2">Booster 2 time:</label> <input type="text" id="Boost2" name="Boost2" readonly="true" /></p>
			<p class="form-field" style="color:#008000">  <label for="Boost3">Booster 3 time:</label> <input type="text" id="Boost3" name="Boost3" readonly="true" /></p>
			<p class="form-field" style="color:#008000">  <label for="Volt">System Voltage:</label> <input type="text" id="Volt" name="Volt" readonly="true" /> </p>
		</div>
		<div  style="border:3px double green;padding-left:2%;padding-right:2%;" class="columnData"><h2 style="color:#008000">Peak data - </h2>
			<p class="form-field"style="color:#008000"> <label for="PAlti">Altitude:</label> <input type="text" id="PAlti" name="PAlti" readonly="true" /></p>
			<p class="form-field"style="color:#008000"> <label for="Pspeed">Speed:</label> <input type="text" id="PSpeed" name="Pspeed" readonly="true" /></p>
			<p class="form-field"style="color:#008000"> <label for="PAccel">Acceleration:</label> <input type="text" id="PAccel" name="PAccel" readonly="true" /></p>
			<p class="form-field"style="color:#008000"> <label for="Eject">Ejection Altitude:</label> <input type="text" id="Eject" name="Eject" readonly="true" /></p>
			<p><button class="ejection-button">problem</button></p>
		
		</div>
	</div> 
	<div class="row">
		<div  style="border:3px double green;" class="columnGraph">
			<h2 style="color:#008000">Graphs - </h2>
			<p style="color:#008000">GPS position: </p>
			<!-- GPS graphic -->
			<body>
				<canvas id="posGPS" style="width:200px"></canvas>
				<script>
					var xyValues = [
					{x:0, y:0},
					{x:10, y:10},
					{x:20, y:20},
					{x:30, y:25},
					{x:30, y:35},
					{x:35, y:40},
					{x:40, y:50},
					{x:50, y:55},
					{x:50, y:60},
					{x:50, y:70},
					{x:60, y:80}
					];

					new Chart("posGPS", {
					type: "line",
					data: {
						datasets: [{
						pointRadius: 4,
						pointBackgroundColor: "red",
						data: xyValues
						}]
					},
					options: {
						legend: {display: false},
						scales: {
						xAxes: [{ticks: {min: 0, max:100}}],
						yAxes: [{ticks: {min: 0, max:100}}],
						}
					}
					});
				</script>
			</body>
		</div>
		<div  style="border:3px double green;" class="columnGraph">
		<h2><br></h2>
			<p style="color:#008000">Orientation: </p>
			<!-- Orientation graphic -->
			<body>
				<canvas id="orientation" style="width:33.33%"></canvas>
				<!-- <button onclick="show_image('rocket.png');">Add Google Logo</button>  -->
				<script>
					var canvas = document.getElementById('orientation');
					var ctx = canvas.getContext('2d');
					
					var images = [];
					images.length = 5;
					
					for (var i = 1; i < images.length; i++) {
					  images[i] = new Image();
					  images[i].src = 'rocketship' + i.toString() + '.png';
					}
					
					var x = 0;
					var i = 1;
					
					setInterval(function() {
					  ctx.clearRect(0, 0, canvas.width, canvas.height);

					  var img = images[i];
					  var aspectRatio = img.width / img.height;
					
					  //Calculate the maximum size of the sprite image based on the canvas size
					  var maxWidth = canvas.width * 1.2;
					  var maxHeight = canvas.height * 1.2;
					
					  // Calculate the width and height of the sprite image based on the aspect ratio and canvas size
					  var width = Math.min(maxWidth, maxHeight * aspectRatio);
					  var height = Math.min(maxHeight, maxWidth / aspectRatio);
					
					  // Calculate the position to draw the sprite image based on the canvas size and sprite size
					  var xPosition = (canvas.width - width) / 2;
					  var yPosition = (canvas.height - height) / 2;
					
					  // Draw the sprite image with the adjusted size and position
					  ctx.drawImage(img, xPosition, yPosition, width, height);
					  // Increase x value
					  x = 10;
					
					  // Check if x value is above a certain threshold and change sprite image accordingly
					  if (x >= 50 && x < 100) {
						i = 2;
					  } else if (x >= 100 && x < 150) {
						i = 3;
					  } else if (x >= 150 && x < 200) {
						i = 4;
					  } else if (x >= 200) {
						i = 5;
					  } else {
						i = 1;
					  }
					}, 100);	
					
					// // super(x, y, 60, 95);
					// // this.model = model;
					// this.imageNum = 0;
					// // this.countMario = 0;
					// this.image.src = "rocket.jpeg";
					// // this.jumpCount = 0;
					// // this.marioScreenLocation = 150;
					// // this.type = "mario";
					// // this.vert_velocity = 0;
					// this.images = [];
					// this.imageNum = ["rocket.jpeg", "rocketRight1.jpeg", "rocketRight2.jpeg", "rocketRight3.jpeg", "rocketLeft1.jpeg", "rocketLeft2.jpeg", "rocketLeft3.jpeg"];
					// for(let i = 0; i < this.imageNum.length; i++){
					// 	this.images[i] = new Image();
					// 	this.images[i].src = this.imageNum[i];
					// }



					/************************Show Image function************************/
					function show_image(src){
						var img = document.createElement("rocket.png");
						
						img.src = src;
						img.width = 10;
						img.height = 10;
						document.body.appendChild(img);
					}
					/********************************************************************/
					// var xyValues = [
					// {x:50, y:7},
					// {x:60, y:8},
					// {x:70, y:8},
					// {x:80, y:9},
					// {x:90, y:9},
					// {x:100, y:9},
					// {x:110, y:10},
					// {x:120, y:11},
					// {x:130, y:14},
					// {x:140, y:14},
					// {x:150, y:15}
					// ];

					// new Chart("orientation", {
					// type: "scatter",
					// data: {
					// 	datasets: [{
					// 	pointRadius: 4,
					// 	// pointBackgroundColor: "rgb(0,0,255)",
					// 	data: xyValues
					// 	}]
					// },
					// options: {
					// 	legend: {display: false},
					// 	scales: {
					// 	xAxes: [{ticks: {min: 40, max:160}}],
					// 	yAxes: [{ticks: {min: 6, max:16}}],
					// 	}
					// }
					// });
				</script>
			</body>
		</div>
		<div  style="border:3px double green;" class="columnGraph">
			<h2><br></h2>
			<p style="color:#008000">E-Match states: </p>
			<!-- EMATCH waveforms -->
			<body>
				<canvas id="ematches" style="width:33.33%"></canvas>
				<script>
					var chart = new Chart("ematches", {
						type: 'scatter',
						data: {
							datasets: [
							//Test dataset 1
								{
									data: [{x:0, y:0}, {x:1, y:0}, {x:1, y:1}, {x:3, y:1}, {x:3, y:0}],
									borderColor: 'black',
									borderWidth: 1,
									fill: false,
									tension: 0,
									showLine: true
								},
							  
								//Test dataset 2
								{
									data: [{x:4, y:0}, {x:4, y:1}, {x:5.5, y:1}, {x:5.5, y:0}],
									borderColor: 'green',
									borderWidth: 1,
									fill: false,
									tension: 0,
									showLine: true
								}
							]
						},
					   options: {
						  legend: false,
						  tooltips: false,
						  scales: {
							 xAxes: [{
								ticks: {
								   min: 0,
								   max: 10
								},
								gridLines: {
									color: '#888',
								}
							 }],
							 yAxes: [{
								ticks: {
								   min: 0,
								   max: 4,
								   padding: 10
								},
								gridLines: {
									drawOnChartArea: false
								}
							 }]
						  }
					   }
					});
				</script>
			</body>
		</div>
	</div>
</body>
</html>